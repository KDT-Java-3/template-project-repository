# ì¬ì§ì_JAVA_í”„ë¡œì íŠ¸_1ì£¼ì°¨ (week-01-project)

## í”„ë¡œì íŠ¸ ìš”êµ¬ ì‚¬í•­

### í”„ë¡œì íŠ¸ ì†Œê°œ

ğŸ‘‰ ì´ë²ˆ ì£¼ì°¨ëŠ” ì»¤ë¨¸ìŠ¤ ì‹œìŠ¤í…œì˜ í•µì‹¬ì ì¸ ê¸°ëŠ¥ì¸ **ìƒí’ˆ ê´€ë¦¬**ì™€ **ì£¼ë¬¸ ì²˜ë¦¬**ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

ì‹¤ì œ ì»¤ë¨¸ìŠ¤ ì„œë¹„ìŠ¤ì—ì„œ í™œìš©ë  ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³ , íš¨ìœ¨ì ì¸ API ì„¤ê³„ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„ì„ í†µí•´ ì‹¤ë¬´ì ì¸ ê°œë°œ ëŠ¥ë ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì§„í–‰ì„
í†µí•´ **ìƒí’ˆ**, **ì¹´í…Œê³ ë¦¬**, **ì£¼ë¬¸**, **í™˜ë¶ˆ**ê³¼ ê°™ì€ ì£¼ìš” ë„ë©”ì¸ì„ ë‹¤ë£¨ë©°, **RESTful API ì„¤ê³„**ë¥¼ ì‹¤ìŠµí•©ë‹ˆë‹¤.

ì´ í”„ë¡œì íŠ¸ëŠ” í¬ê²Œ ì„¸ ê°€ì§€ ì£¼ìš” ëª©í‘œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

- RESTful ì›ì¹™ì„ ê¸°ë°˜ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ ë°ì´í„° í†µì‹  ë°©ì‹ì„ ì´í•´í•˜ê³  íš¨ìœ¨ì ì´ë©° ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•œ APIë¥¼ ì„¤ê³„í•©ë‹ˆë‹¤.
- ìƒí’ˆê³¼ ì£¼ë¬¸ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë„ë©”ì¸ ë¡œì§ì„ ì„¤ê³„í•˜ê³ , ì£¼ë¬¸ ìƒì„±, ìƒíƒœ ê´€ë¦¬, ê²°ì œ ì²˜ë¦¬ ê°™ì€ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
- ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ë¥¼ í†µí•´ ìƒí’ˆ, ì¹´í…Œê³ ë¦¬, ì£¼ë¬¸, í™˜ë¶ˆ ë“± ì£¼ìš” ì—”í‹°í‹°ë¥¼ ì •ì˜í•˜ê³  ê´€ê³„í˜• ë°ì´í„° ëª¨ë¸ë§ì„ í•™ìŠµí•©ë‹ˆë‹¤.

---

## êµ¬í˜„ ìš”êµ¬ì‚¬í•­

### 1. **ìƒí’ˆ ê´€ë¦¬ (Product Management)**

- **ìƒí’ˆ ë“±ë¡ API**
    - ìƒí’ˆ ì´ë¦„, ì„¤ëª…, ê°€ê²©, ì¬ê³ , ì¹´í…Œê³ ë¦¬ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ ìƒˆë¡œìš´ ìƒí’ˆì„ ë“±ë¡í•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - í•„ìˆ˜ ì…ë ¥ í•„ë“œ: `name`, `price`, `stock`, `category_id`.
- **ìƒí’ˆ ì¡°íšŒ API**
    - ë‹¨ì¼ ìƒí’ˆ ìƒì„¸ ì¡°íšŒ ë° ì „ì²´ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¡°íšŒí•˜ëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - ê²€ìƒ‰ ë° í•„í„°ë§ ì¡°ê±´: ì¹´í…Œê³ ë¦¬, ê°€ê²© ë²”ìœ„, ìƒí’ˆëª… í‚¤ì›Œë“œ.
- **ìƒí’ˆ ìˆ˜ì • API**
    - ê¸°ì¡´ì— ë“±ë¡ëœ ìƒí’ˆ ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - ë³€ê²½ ê°€ëŠ¥í•œ í•„ë“œ: `name`, `description`, `price`, `stock`, `category_id`.

### 2. **ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ (Category Management)**

- **ì¹´í…Œê³ ë¦¬ ë“±ë¡ API**
    - ì¹´í…Œê³ ë¦¬ ì´ë¦„ê³¼ ì„¤ëª…ì„ ì…ë ¥ë°›ì•„ ìƒˆë¡œìš´ ì¹´í…Œê³ ë¦¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
- **ì¹´í…Œê³ ë¦¬ ì¡°íšŒ API**
    - ëª¨ë“  ì¹´í…Œê³ ë¦¬ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - ìƒí’ˆê³¼ ì—°ê´€ëœ ì¹´í…Œê³ ë¦¬ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ ë°˜í™˜.
- **ì¹´í…Œê³ ë¦¬ ìˆ˜ì • API**
    - ê¸°ì¡´ ì¹´í…Œê³ ë¦¬ ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - ë³€ê²½ ê°€ëŠ¥í•œ í•„ë“œ: `name`, `description`.

### 3. **ì£¼ë¬¸ ê´€ë¦¬ (Order Management)**

- **ì£¼ë¬¸ ìƒì„± API**
    - ì‚¬ìš©ìê°€ ì¥ë°”êµ¬ë‹ˆì— ë‹´ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - í•„ìˆ˜ ì…ë ¥ í•„ë“œ: `user_id`, `product_id`, `quantity`, `shipping_address`.
    - ì£¼ë¬¸ ìƒì„± ì‹œ, ìƒí’ˆ ì¬ê³ ë¥¼ í™•ì¸í•˜ê³  ê°ì†Œ ì²˜ë¦¬.
- **ì£¼ë¬¸ ì¡°íšŒ API**
    - íŠ¹ì • ì‚¬ìš©ìì˜ ì£¼ë¬¸ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - ì¡°íšŒ ê°€ëŠ¥í•œ ì •ë³´: ì£¼ë¬¸ ìƒíƒœ(`pending`, `completed`, `canceled`), ì£¼ë¬¸ ë‚ ì§œ, ìƒí’ˆ ìƒì„¸.
- **ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ API**
    - ì£¼ë¬¸ì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - ìƒíƒœ ë³€ê²½ ê°€ëŠ¥ ë²”ìœ„: `pending` â†’ `completed` / `canceled`.
- **ì£¼ë¬¸ ì·¨ì†Œ API**
    - ì‚¬ìš©ìê°€ ì£¼ë¬¸ì„ ì·¨ì†Œí•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - ì·¨ì†Œ ì¡°ê±´: `pending` ìƒíƒœì˜ ì£¼ë¬¸ë§Œ ì·¨ì†Œ ê°€ëŠ¥.

### 4. **í™˜ë¶ˆ ê´€ë¦¬ (Refund Management)**

- **í™˜ë¶ˆ ìš”ì²­ API**
    - ì‚¬ìš©ìê°€ íŠ¹ì • ì£¼ë¬¸ì— ëŒ€í•´ í™˜ë¶ˆ ìš”ì²­ì„ í•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - í•„ìˆ˜ ì…ë ¥ í•„ë“œ: `user_id`, `order_id`, `reason`.
- **í™˜ë¶ˆ ì²˜ë¦¬ API**
    - ê´€ë¦¬ìê°€ í™˜ë¶ˆ ìš”ì²­ì„ ìŠ¹ì¸í•˜ê±°ë‚˜ ê±°ì ˆí•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - í™˜ë¶ˆ ìŠ¹ì¸ ì‹œ, í™˜ë¶ˆëœ ìƒí’ˆì˜ ì¬ê³  ë³µì›.
- **í™˜ë¶ˆ ì¡°íšŒ API**
    - íŠ¹ì • ì‚¬ìš©ìì˜ í™˜ë¶ˆ ìš”ì²­ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    - ì¡°íšŒ ê°€ëŠ¥í•œ ì •ë³´: í™˜ë¶ˆ ìƒíƒœ(`pending`, `approved`, `rejected`), í™˜ë¶ˆ ìš”ì²­ ë‚ ì§œ, ì‚¬ìœ .

---

## ì œì¶œ ë°©ë²• ë° í‰ê°€ ê¸°ì¤€

### ğŸ“… **ì œì¶œ ë°©ë²•**

**Branch ìƒì„± ë° ì‘ì—…**

ì œê³µëœ ì£¼ì°¨ë³„ Git repositoryì—ì„œ **ì‹ ê·œ Branch**ë¥¼ ìƒì„±í•œ ë’¤ ì‘ì—…í•©ë‹ˆë‹¤.

- Branch ì´ë¦„ í˜•ì‹:
    - `â€œwork/{íœ´ëŒ€ì „í™”ë²ˆí˜¸}-{ì˜ë¬¸ ì´ë¦„}â€`ì˜ˆ: `work/1234-5678-john-doe`
- **Commit ë° Push**

  ì‘ì—… ë‚´ìš©ì„ **ì‘ì—…ìš© ë¸Œëœì¹˜**ì— Commití•˜ê³  Pushí•©ë‹ˆë‹¤.

- **PR ìš”ì²­**

  ì‘ì—…ì´ ì™„ë£Œë˜ë©´ **ì‘ì—…ìš© ë¸Œëœì¹˜**ì—ì„œ **ì œì¶œìš© ë¸Œëœì¹˜**ë¡œ PR(Pull Request)ì„ ìƒì„±í•©ë‹ˆë‹¤.

    - ì œì¶œìš© ë¸Œëœì¹˜ ì´ë¦„ í˜•ì‹:
        - `â€œproject/{íœ´ëŒ€ì „í™”ë²ˆí˜¸}-{ì˜ë¬¸ ì´ë¦„}â€`ì˜ˆ: `project/1234-5678-john-doe`
- **PR ë¦¬ë·° ë° ë³‘í•©**

  ë¦¬ë·°ê°€ ì™„ë£Œë˜ë©´ **ì œì¶œìš© ë¸Œëœì¹˜**ì— PRì„ ë³‘í•©í•©ë‹ˆë‹¤.

### ğŸ“– **í‰ê°€ ë°©ë²•**

**ìš”êµ¬ì‚¬í•­ ë‹¬ì„± ì—¬ë¶€**ì™€ **ê¸°ëŠ¥ í™•ì¥ì„ ê³ ë ¤í•œ ì½”ë“œ ì‘ì„± ì—¬ë¶€**ë¥¼ ì¤‘ì ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.

---

## ë°ì´í„° ëª¨ë¸ë§

### ERD

![erd](/src/main/resources/static/image/sparta-week1.png)

```
Table users {
  id              bigint [pk, increment]
  username        varchar(50) [not null]
  email           varchar(255) [not null, unique]
  password_hash   varchar(255) [not null]
  created_at      datetime [not null, default: `CURRENT_TIMESTAMP`]
  updated_at      datetime [not null, default: `CURRENT_TIMESTAMP`]

  Indexes {
    (email) [unique, name: 'uq_users_email']
  }
}

Table categories {
  id              bigint [pk, increment]
  name            varchar(100) [not null, unique]
  description     text
  created_at      datetime [not null, default: `CURRENT_TIMESTAMP`]
  updated_at      datetime [not null, default: `CURRENT_TIMESTAMP`]

  Indexes {
    (name) [unique, name: 'uq_categories_name']
  }
}

Table products {
  id              bigint [pk, increment]
  name            varchar(150) [not null]
  description     text
  price           decimal(10,2) [not null]
  stock           int [not null, default: 0]
  category_id     bigint [not null]
  created_at      datetime [not null, default: `CURRENT_TIMESTAMP`]
  updated_at      datetime [not null, default: `CURRENT_TIMESTAMP`]

  Indexes {
    (category_id) [name: 'idx_products_category_id']
    (name)        [name: 'idx_products_name']
    (price)       [name: 'idx_products_price']
  }
}

Table orders {
  id                bigint [pk, increment]
  user_id           bigint [not null]
  status            varchar(20) [not null, note: 'pending|completed|canceled']
  order_date        datetime [not null, default: `CURRENT_TIMESTAMP`]
  shipping_address  text [not null]
  created_at        datetime [not null, default: `CURRENT_TIMESTAMP`]
  updated_at        datetime [not null, default: `CURRENT_TIMESTAMP`]

  Indexes {
    (user_id)    [name: 'idx_orders_user_id']
    (status)     [name: 'idx_orders_status']
    (order_date) [name: 'idx_orders_order_date']
  }
}

Table order_items {
  id              bigint [pk, increment]
  order_id        bigint [not null]
  product_id      bigint [not null]
  quantity        int [not null]
  unit_price      decimal(10,2) [not null, note: 'price at ordering time']
  created_at      datetime [not null, default: `CURRENT_TIMESTAMP`]
  updated_at      datetime [not null, default: `CURRENT_TIMESTAMP`]

  Indexes {
    (order_id)              [name: 'idx_order_items_order_id']
    (product_id)            [name: 'idx_order_items_product_id']
    (order_id, product_id)  [unique, name: 'uq_order_items_order_product']
  }
}

Table refunds {
  id              bigint [pk, increment]
  user_id         bigint [not null]
  order_id        bigint [not null]
  status          varchar(20) [not null, note: 'pending|approved|rejected']
  reason          text [not null]
  requested_at    datetime [not null, default: `CURRENT_TIMESTAMP`]
  processed_at    datetime
  created_at      datetime [not null, default: `CURRENT_TIMESTAMP`]
  updated_at      datetime [not null, default: `CURRENT_TIMESTAMP`]

  Indexes {
    (user_id)      [name: 'idx_refunds_user_id']
    (order_id)     [name: 'idx_refunds_order_id']
    (status)       [name: 'idx_refunds_status']
    (requested_at) [name: 'idx_refunds_requested_at']
  }
}

Table roles {
  id          bigint [pk, increment]
  name        varchar(100) [not null, unique, note: 'e.g., ROLE_USER, ROLE_ADMIN']
  description text
  created_at  datetime [not null, default: `CURRENT_TIMESTAMP`]
  updated_at  datetime [not null, default: `CURRENT_TIMESTAMP`]

  Indexes {
    (name) [unique, name: 'uq_roles_name']
  }
}

Table user_roles {
  id          bigint [pk, increment] // ë‹¨ì¼ PK (í•©ì„± PK ëŒ€ì‹ )
  user_id     bigint [not null]
  role_id     bigint [not null]
  granted_at  datetime [not null, default: `CURRENT_TIMESTAMP`]
  granted_by  bigint // ì—­í•  ë¶€ì—¬ ê´€ë¦¬ì (ì„ íƒ)

  Indexes {
    (user_id, role_id) [unique, name: 'uq_user_roles_user_role']
    (user_id)          [name: 'idx_user_roles_user_id']
    (role_id)          [name: 'idx_user_roles_role_id']
  }
}

/* Relationships */
Ref: products.category_id > categories.id

Ref: orders.user_id > users.id
Ref: order_items.order_id > orders.id
Ref: order_items.product_id > products.id

Ref: refunds.user_id > users.id
Ref: refunds.order_id > orders.id

Ref: user_roles.user_id > users.id
Ref: user_roles.role_id > roles.id
Ref: user_roles.granted_by > users.id
```

---

## ìë£Œ

### MapStruct ì‚¬ìš© ì˜ˆì‹œ

```java
// TODO: UserEntity, UserDto í´ë˜ìŠ¤ ìƒì„± ì´í›„ ì‹¤ìŠµ ì˜ˆì •

import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.factory.Mappers;

@Mapper(componentModel = "spring") // MapStructê°€ ìƒì„±í•  êµ¬í˜„ì²´ë¥¼ ìŠ¤í”„ë§ Beanìœ¼ë¡œ ë“±ë¡
public interface UserMapper {

    // í•„ë“œëª…ì´ ë‹¤ë¥¼ ê²½ìš° @Mappingìœ¼ë¡œ ì§ì ‘ ì§€ì •
    @Mapping(source = "email", target = "emailAddress")
    UserDto toDto(UserEntity entity);

    // í•„ë“œëª…ì´ ê°™ë‹¤ë©´ ë³„ë„ ë§¤í•‘ ì—†ì´ ìë™ìœ¼ë¡œ ë³€í™˜
    UserEntity toEntity(UserDto dto);
}
```
